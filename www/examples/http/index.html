<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/images/favicon_io/favicon.ico">
    <link rel="apple-touch-icon" href="/images/favicon_io/apple-touch-icon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>http</title>
    <link rel="stylesheet" href="../../dist/app.css">
    <style>
        /* TODO Show div#loader while HTTP requests are in progress,
         this prevents UI from triggering duplicate events */
        #loader {
            z-index: 100;
            position: fixed;
            padding: 0;
            margin: 0;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            opacity: 0.1;
        }
    </style>
</head>

<body>
    <section class="section" x-data>
        <div id="loader" style="display: none">&nbsp;</div>

        <div class="container">
            <h1 class="title">
                <a href="https://github.com/mozey/ts/tree/main/src/http#readme">
                    HTTP Client Examples</a>
            </h1>
            <p>&nbsp;</p>
            <p class="subtitle">
                Makes use of the Fetch API.
                Click the links below to make HTTP Requests
            </p>
            <div class="block">
                <ul>
                    <li><a href="javascript:" x-on:click="app.examples.http.post()">
                            Post</a></li>
                    <li><a href="javascript:" x-on:click="app.examples.http.timeout()">
                            Timeout</a></li>
                    <li><a href="javascript:" x-on:click="app.examples.http.interceptor()">
                            Intercept requests</a></li>
                    <li><a href="javascript:" x-on:click="app.examples.http.progress()">
                            Progress indicator</a></li>
                    <li><a href="javascript:" x-on:click="app.examples.http.simultaneous()">
                            Simultaneous requests</a></li>
                    <li><a href="javascript:" x-on:click="app.examples.http.requestInterface()">
                            Request interface</a></li>
                </ul>
            </div>
        </div>

        <p>&nbsp;</p>

        <div id="results" class="container">&nbsp;</div>
    </section>

    <!-- https://www.w3schools.com/tags/tag_template.asp -->
    <template id="results-template">
        <!-- https://www.w3schools.com/w3css/w3css_alerts.asp -->
        <div class="block">
            <div class="box">
                <div class="buttons is-right">
                    <!-- TODO Better way to find div to be removed? -->
                    <span x-on:click="$el.parentElement.parentElement.parentElement.remove()" class="button is-danger">&times;</span>
                </div>
                <h3>Request</h3>
                <h3>
                    <form id="url" action="" method="" target="_blank">
                        url => <a href="javascript:" onclick="this.parentElement.submit()">&nbsp;</a>
                    </form>
                </h3>
                <p>
                <!-- TODO Use id instead of class for this type of thing -->
                <pre id="req">&nbsp;</pre>
                </p>
                <h3>Response</h3>
                <p>
                <pre id="resp">&nbsp;</pre>
                </p>
            </div>
        </div>
    </template>

    <template id="results-template-2">
        <div class="container">
            <progress id="progress" class="progress" value="0" max="100"></progress>
            <img id="img" src="">
        </div>
    </template>

    <script src="../../dist/app.js"></script>
    <script>
        // https://developer.mozilla.org/en-US/docs/Web/API/Window/load_event
        window.addEventListener('load', (event) => {
            // Demonstrating the "load" event, and calling a function 
            // on the global "app" namespace, see src/app.ts,
            // and logs in the Dev Console
            app.examples.http.sayHello();
        });
    </script>
</body>

</html>